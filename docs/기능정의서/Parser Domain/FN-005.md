FN-005: X/Twitter Thread Parser
- Purpose / Value – Capture complete Twitter/X threads and conversations
- Scope / Module – features/parser/twitter/twitter_parser
- Primary Actor(s) – Background Processor
- Triggers – Twitter/X URL detected
- Inputs –
  - Tweet URL (String)
  - Auth token (String?) optional
  - Include replies (Boolean)
- Processing Logic –
  1. Extract tweet ID from URL
  2. Detect thread vs single tweet
  3. Try API v2 if token available
  4. Fallback to web scraping
  5. Collect all thread tweets
  6. Extract media URLs
  7. Process quoted tweets
  8. Gather author info
- Outputs –
  - List<TweetModel>
  - Media assets list
  - Thread structure
- Business Rules & Constraints –
  - Max 100 tweets per thread
  - Protected accounts need auth
  - Media limit: 4 per tweet
  - Rate limit: 300 requests/15min
- Error Handling & Edge Cases –
  - API unavailable → Web scrape
  - Deleted tweets → Partial save
  - Private account → Error message
  - Rate limited → Queue retry
- Data Model Touchpoints –
  - twitter_threads (CREATE)
  - tweet_media (CREATE)
- API Endpoints / Methods –
  - Twitter API v2 /tweets/:id
  - Web scraping fallback
- Permissions / Security –
  - Optional OAuth token
  - Rate limit respect
- Performance / SLA Notes –
  - Max 10s per thread
  - Parallel media fetch
- UX References –
  - TwitterThreadView
  - TweetCard
- Dependencies –
  - twitter_api_v2: ^4.0.0
  - web_scraper: ^0.1.4
- Acceptance Criteria –
  - Capture complete threads
  - Preserve tweet order
  - Download all media
  - Handle deletions gracefully
- Code Pointers –
  - lib/features/parser/twitter/twitter_parser.dart
  - lib/features/parser/twitter/scraper/twitter_scraper.dart