FN-007: Threads Content Parser
- Purpose / Value – Save posts and conversations from Meta's Threads platform
- Scope / Module – features/parser/threads/threads_parser
- Primary Actor(s) – Background Processor
- Triggers – threads.net URL detected
- Inputs –
  - Threads URL (String)
  - Session cookie (String?) optional
  - Include replies (Boolean)
- Processing Logic –
  1. Validate Threads URL pattern
  2. Extract post ID and username
  3. Detect single post vs thread
  4. Try GraphQL API
  5. Fallback to web parsing
  6. Collect thread conversation
  7. Extract all media
  8. Parse mentions/hashtags
  9. Handle quoted posts
- Outputs –
  - ThreadsPost object
  - Media assets list
  - Author information
- Business Rules & Constraints –
  - Max 50 posts per thread
  - Public posts only (no auth)
  - Media limit: 10 per post
  - Text limit: 500 chars
- Error Handling & Edge Cases –
  - Login required → Public data only
  - Deleted post → 404 handling
  - Region blocked → VPN suggestion
  - API changes → Parser update
- Data Model Touchpoints –
  - threads_posts (CREATE)
  - threads_media (CREATE)
- API Endpoints / Methods –
  - Threads GraphQL (unofficial)
  - Web scraping fallback
- Permissions / Security – Optional auth cookie
- Performance / SLA Notes –
  - 3s per post
  - Max 15s per thread
- UX References –
  - ThreadsPostCard
  - ThreadsThreadView
- Dependencies –
  - graphql: ^5.0.0
  - html: ^0.15.0
- Acceptance Criteria –
  - Parse all public posts
  - Preserve thread order
  - Extract all media types
  - Handle special characters
- Code Pointers –
  - lib/features/parser/threads/threads_parser.dart
  - lib/features/parser/threads/graphql/threads_client.dart