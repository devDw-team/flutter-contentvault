FN-004: YouTube Content Parser
- Purpose / Value – Extract structured data from YouTube videos
- Scope / Module – features/parser/youtube/youtube_parser
- Primary Actor(s) – Background Processor
- Triggers – YouTube URL detected in save queue
- Inputs –
  - YouTube URL (String)
  - API key (String)
  - Parse options (ParseOptions)
- Processing Logic –
  1. Extract video ID from URL
  2. Call YouTube Data API v3
  3. Fetch video metadata
  4. Check for captions availability
  5. Extract thumbnail URLs
  6. Parse description for timestamps
  7. Get channel information
  8. Build ContentModel
- Outputs –
  - YouTubeContent object
  - Thumbnail URLs list
  - Caption availability flag
- Business Rules & Constraints –
  - API quota: 10,000 units/day
  - Max description: 5,000 chars
  - Support youtube.com & youtu.be
  - Private videos inaccessible
- Error Handling & Edge Cases –
  - API quota exceeded → Basic parse only
  - Video deleted → Save URL + error
  - Age-restricted → Flag content
  - No API key → Web scraping fallback
- Data Model Touchpoints –
  - youtube_metadata (CREATE)
  - contents (CREATE)
- API Endpoints / Methods –
  - YouTube Data API v3 /videos
  - YouTube Data API v3 /captions
- Permissions / Security – YouTube API key required
- Performance / SLA Notes –
  - API timeout: 5s
  - Cache results 7 days
- UX References –
  - YouTubeContentCard
  - VideoInfoDisplay
- Dependencies –
  - youtube_api: ^1.0.0
  - html: ^0.15.0
- Acceptance Criteria –
  - Parse 99% of public videos
  - Extract all metadata fields
  - Handle all URL formats
  - Graceful API failures
- Code Pointers –
  - lib/features/parser/youtube/youtube_parser.dart
  - lib/features/parser/youtube/models/youtube_content.dart