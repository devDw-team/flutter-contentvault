FN-013: Advanced Search Filters
- Purpose / Value – Enable precise content filtering
- Scope / Module – features/search/presentation/filter_sheet
- Primary Actor(s) – User, Search UI
- Triggers –
  - Filter button tap
  - Chip selection
  - Date picker use
- Inputs –
  - Current filters (FilterState)
  - Available options (FilterOptions)
  - User selections (Map)
- Processing Logic –
  1. Load available filters
  2. Show current state
  3. Handle multi-select
  4. Validate combinations
  5. Update filter state
  6. Apply to search
  7. Save preferences
- Outputs –
  - Updated filters (FilterState)
  - Active count (Integer)
  - Validation errors (List)
- Business Rules & Constraints –
  - Max 5 tags selected
  - Date range max 1 year
  - Mutually exclusive filters
  - Some filters require others
- Error Handling & Edge Cases –
  - Invalid date range → Show error
  - No results preview → Warn
  - Conflicting filters → Auto-resolve
  - Reset fails → Restore backup
- Data Model Touchpoints –
  - user_preferences (UPDATE)
  - filter_presets (READ/WRITE)
- API Endpoints / Methods – Local state
- Permissions / Security – User preferences
- Performance / SLA Notes – Instant apply
- UX References –
  - FilterBottomSheet
  - FilterChipGroup
  - DateRangePicker
- Dependencies –
  - flutter_datetime_picker: ^1.5.0
- Acceptance Criteria –
  - All filters functional
  - State persistence
  - Clear UI feedback
  - Preset support
- Code Pointers –
  - lib/features/search/presentation/filter_sheet.dart
  - lib/features/search/models/filter_state.dart