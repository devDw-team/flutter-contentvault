FN-012: Full-Text Search Engine
- Purpose / Value – Enable fast, comprehensive content search
- Scope / Module – features/search/services/search_engine
- Primary Actor(s) – User, Search UI
- Triggers –
  - Search query input
  - Filter change
  - Sort change
- Inputs –
  - Query string (String)
  - Filters (SearchFilters)
  - Sort order (SortType)
  - Page info (offset, limit)
- Processing Logic –
  1. Parse and clean query
  2. Build FTS5 query
  3. Apply filters (date, type, tags)
  4. Execute search
  5. Calculate relevance scores
  6. Apply sorting
  7. Paginate results
  8. Highlight matches
- Outputs –
  - Search results (List<SearchResult>)
  - Total count (Integer)
  - Facets (Map<String, Integer>)
  - Query time (Duration)
- Business Rules & Constraints –
  - Min query length: 2 chars
  - Max results: 100 per page
  - Search history: 30 items
  - Timeout: 1 second
- Error Handling & Edge Cases –
  - Empty query → Recent content
  - No results → Suggestions
  - DB error → Fallback search
  - Special chars → Escape
- Data Model Touchpoints –
  - contents_fts (SEARCH)
  - search_history (CREATE)
  - search_analytics (CREATE)
- API Endpoints / Methods – SQLite FTS5
- Permissions / Security – User content only
- Performance / SLA Notes –
  - < 100ms for 10k items
  - Index on save
- UX References –
  - SearchBar
  - SearchResultsList
  - SearchFilters
- Dependencies –
  - sqflite: ^2.2.0
  - fts5 extension
- Acceptance Criteria –
  - Sub-100ms search
  - Korean/English support
  - Fuzzy matching
  - Real-time results
- Code Pointers –
  - lib/features/search/services/search_engine.dart
  - lib/features/search/utils/query_builder.dart