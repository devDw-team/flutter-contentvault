FN-014: Search History & Suggestions
- Purpose / Value – Speed up repeated searches and discovery
- Scope / Module – features/search/services/search_history
- Primary Actor(s) – User, Search Bar
- Triggers –
  - Search bar focus
  - Query typing
  - Search execution
- Inputs –
  - Partial query (String)
  - User ID (String)
  - Limit (Integer)
- Processing Logic –
  1. Load recent searches
  2. Match partial query
  3. Get trending searches
  4. Combine and rank
  5. Remove duplicates
  6. Apply privacy rules
  7. Format for display
- Outputs –
  - Recent searches (List)
  - Suggestions (List)
  - Trending topics (List)
- Business Rules & Constraints –
  - Keep last 30 searches
  - Auto-delete after 30 days
  - No sensitive terms saved
  - User can clear history
- Error Handling & Edge Cases –
  - DB error → Empty list
  - Privacy mode → No saving
  - Corrupt data → Clean rebuild
- Data Model Touchpoints –
  - search_history (CRUD)
  - trending_searches (READ)
- API Endpoints / Methods – Local only
- Permissions / Security – User-specific
- Performance / SLA Notes – < 50ms
- UX References –
  - SearchHistoryList
  - SuggestionDropdown
- Dependencies – Local SQLite
- Acceptance Criteria –
  - Instant suggestions
  - Privacy respected
  - Easy to clear
  - Relevant results
- Code Pointers –
  - lib/features/search/services/search_history.dart
  - lib/features/search/widgets/suggestion_list.dart