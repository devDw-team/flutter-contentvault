FN-015: Immersive Reader Mode
- Purpose / Value – Provide distraction-free reading experience
- Scope / Module – features/viewer/presentation/reader_screen
- Primary Actor(s) – User
- Triggers –
  - Content tap from list
  - Reader mode toggle
  - External link open
- Inputs –
  - Content ID (String)
  - Reader settings (ReaderSettings)
  - Scroll position (Double?)
- Processing Logic –
  1. Load content from DB
  2. Apply reader theme
  3. Process HTML/Markdown
  4. Inject custom CSS
  5. Handle images/videos
  6. Track reading progress
  7. Restore scroll position
- Outputs –
  - Rendered content
  - Reading progress (%)
  - Time spent (Duration)
- Business Rules & Constraints –
  - Font size: 12-24pt
  - Line height: 1.4-2.0
  - Max width: 720px
  - Support dark mode
- Error Handling & Edge Cases –
  - Missing content → Reload
  - Corrupt HTML → Plain text
  - Large images → Lazy load
  - No network → Offline mode
- Data Model Touchpoints –
  - contents (READ)
  - reading_progress (UPDATE)
  - reader_settings (READ/UPDATE)
- API Endpoints / Methods – Local rendering
- Permissions / Security – User content only
- Performance / SLA Notes –
  - Render < 1s
  - 60fps scroll
- UX References –
  - ReaderView
  - ReadingToolbar
  - FontSettings
- Dependencies –
  - flutter_html: ^3.0.0
  - webview_flutter: ^4.0.0
- Acceptance Criteria –
  - Smooth reading
  - All content types
  - Settings persist
  - Progress tracked
- Code Pointers –
  - lib/features/viewer/presentation/reader_screen.dart
  - lib/features/viewer/utils/content_renderer.dart