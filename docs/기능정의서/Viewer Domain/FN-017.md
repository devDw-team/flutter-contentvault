FN-017: Content Sharing & Export
- Purpose / Value – Share content with others or export for backup
- Scope / Module – features/viewer/services/share_service
- Primary Actor(s) – User
- Triggers –
  - Share button tap
  - Export menu selection
  - Bulk export request
- Inputs –
  - Content IDs (List<String>)
  - Export format (ExportFormat)
  - Include annotations (Boolean)
- Processing Logic –
  1. Gather selected content
  2. Choose export format
  3. Include annotations option
  4. Generate export file
  5. Handle media assets
  6. Create shareable link
  7. Track share analytics
- Outputs –
  - Export file (File)
  - Share URL (String?)
  - Export metadata
- Business Rules & Constraints –
  - Max 50 items per export
  - Formats: PDF, Markdown, JSON
  - Respect content rights
  - 7-day share link expiry
- Error Handling & Edge Cases –
  - Large export → Background job
  - No network → Local file only
  - Format error → Fallback to JSON
  - Rights issue → Exclude content
- Data Model Touchpoints –
  - export_jobs (CREATE)
  - share_links (CREATE)
- API Endpoints / Methods –
  - POST /api/export
  - GET /api/share/:id
- Permissions / Security –
  - User content only
  - Share links authenticated
- Performance / SLA Notes –
  - < 10s for 10 items
  - Background for large
- UX References –
  - ShareSheet
  - ExportOptions
  - ProgressDialog
- Dependencies –
  - share_plus: ^7.0.0
  - pdf: ^3.10.0
- Acceptance Criteria –
  - All formats work
  - Media included
  - Share tracking
  - Offline export
- Code Pointers –
  - lib/features/viewer/services/share_service.dart
  - lib/features/viewer/utils/export_generator.dart